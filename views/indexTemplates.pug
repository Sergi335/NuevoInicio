doctype html
head
  meta(charset='UTF-8')
  meta(http-equiv='X-UA-Compatible' content='IE=edge')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title Document
  link(rel='stylesheet' href='/css/style2.css')
  link(rel='stylesheet' href='/css/icofont/icofont/icofont.min.css')
  link(href='node_modules/gridstack/dist/gridstack.min.css' rel='stylesheet')
  script(src='node_modules/gridstack/dist/gridstack-all.js')
  script(src='https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js')
  script(src='/js/MiniMasonry.js-master/build/minimasonry.min.js')
  script(type='module' src='/js/scripts3.js')
  script(src='/js/search.js')
  script(type='module' src='/js/sidepanel.js')
  script(type='module' src='/js/functions.mjs')

include includes/header.pug
.container
  div(id=escritorio + 'Cols' class='cuerpoInt' data-id='columns')
    - var contador = {}
    each val in columnas
      .envolt(orden= `${val.order}`)
        .headercolumn
          h2.ctitle= val.name
        
        - var item = val.name
        if contador.hasOwnProperty(item)
          - var numero = contador[item] + 1
          - contador[item] = numero
          div(id=escritorio + val.name + numero, class='columna', data-db=`${val._id}`)
            each link in links
              if link.idpanel == val._id
                .link(id=`${link._id}` orden= `${link.orden}`)
                  a(href= `${link.URL}` target='_blank' title= `${link.name}`)
                    img(src=`${link.imgURL}`)
                    | #{link.name}
                  .lcontrols
                    span.icofont-ui-edit.showPanel
            if val.vacio == true
              .link(orden='0')
        else
          - contador[item] = 1
          div(id=escritorio + val.name, class='columna', data-db=`${val._id}`)
            each link in links
              if link.idpanel == val._id
                .link(id=`${link._id}` orden= `${link.orden}`)
                  a(href= `${link.URL}` target='_blank' title= `${link.name}`)
                    img(src=`${link.imgURL}`)
                    | #{link.name}
                  .lcontrols
                    span.icofont-ui-edit.showPanel
            if val.vacio == true
              .link(orden='0')
.container
  p#moveError
  #addDeskForm.deskForm
    h2 A&ntilde;ade Escritorio
    input#deskName(type='text' name='deskName')
    button#deskSubmit(type='submit') Enviar
    p#deskError
  #editDeskForm.deskForm
    h2 Edita Escritorio
    input#editdeskName(type='text' name='deskName')
    button#editdeskSubmit(type='submit') Modificar
    p#editdeskError
  #addColForm.deskForm
    h2 A&ntilde;ade Columna
    input#colName(type='text' name='colName')
    button#colSubmit(type='submit') Enviar
    p#addColError
  #addLinkForm.deskForm
    h2 A&ntilde;ade Link
    p Nombre
    input#linkName(type='text' name='linkName')
    p URL
    input#linkURL(type='text' name='linkURL')
    button#linkSubmit(type='submit') Enviar
    p#linkError
  #editLinkForm.deskForm
    h2 Edita Link
    fieldset
      legend Nombre y URL
      label(for='editLinkName') Nombre
      input#editlinkName(type='text' name='editlinkName' placeholder='')
      label(for='editLinkURL') URL
      input#editlinkURL(type='text' name='editlinkURL' placeholder='')
      button#editlinkSubmit(type='submit') Modificar
      p#editLinkError
    fieldset
      legend Mover Link
      label(for='moveLink') Selecciona columna:
      select#moveLink(name='desktops')
        if columnas !== undefined
        each val in columnas
          option(value=`${val.name}`) #{val.name}
      p#moveLinkError Error de muestra
    fieldset
      legend Cambiar Imagen
      label(for='linkImg') Selecciona una imagen:
      input#linkImg(type='file' name='linkImg')
      p#editLinkImageError Error de muestra
  #deleteLinkForm.deskForm
    h2 Seguro que quieres borrar este Link?
    button#confDeletelinkSubmit(type='submit') Si
    button#noDeletelinkSubmit(type='submit') No
    p#deleteLinkError
  #deleteColForm.deskForm
    h2 Seguro que quieres borrar esta columna?
    button#confDeletecolSubmit(type='submit') Si
    button#noDeletecolSubmit(type='submit') No
    p#deleteColError
  #deleteDeskForm.deskForm
    h2 Seguro que quieres borrar este escritorio?
    button#confDeletedeskSubmit(type='submit') Si
    button#noDeletedeskSubmit(type='submit') No
    p#deleteDeskError
  #menuColumn.menuColumn
    strong Opciones Columna
    p#elementoC informacion del elemento 
    p#infoC otra informacion
    span.menuItem.addlink Nuevo
    span.menuItem.paste-btn Pegar
    span.menuItem.editcol Editar
    span.menuItem.moveCol Mover a
      i.icofont-thin-right
      ul#destDesk
        if escritorios !== undefined
        each val in escritorios
          li(id=`${val.name}`)= val.name
    span.menuItem.borracol Borrar 
  #menuLink.menuLink
    strong Opciones Enlace
    p#elementoL informacion del elemento 
    p#infoL otra informacion
    span.menuItem.editalink Editar
    span.menuItem.moveLink Mover a
      i.icofont-thin-right
      ul#destCol
        strong#otherDesk Mover a otro escritorio
        if columnas !== undefined
        each val in columnas
          li(id=`${val.name}`)= val.name
    span.menuItem.borralink Borrar
  #menuMoveTo(draggable='true')
    ul#destDeskMoveTo
      if escritorios !== undefined
        each val in escritorios
          li.accordion(id=`${val.name}`)
            i.icofont-folder &nbsp;
            | #{val.name}
            ul
              each columnasVal in columnasAll
                - if (columnasVal.escritorio === val.name)
                    li(id=`${columnasVal.name}`)= columnasVal.name
    #moveToControls
      button#acceptMove Aceptar 
      button#cancelMove Cancelar
  #alertCard
include includes/sidepanel.pug
script(src='/js/Sortable-master/Sortable.min.js')