doctype html
head
  meta(charset='UTF-8')
  meta(http-equiv='X-UA-Compatible' content='IE=edge')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title Document
  link(rel='stylesheet' href='/css/style2.css')
  link(rel='stylesheet' href='/css/editMode.css')
  link(rel='stylesheet' href='/css/icofont/icofont/icofont.min.css')
  script(src='https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js')
  script(src='/js/MiniMasonry.js-master/build/minimasonry.min.js')
  script(type='module' src='/js/editMode.js')
  script(type='module' src='/js/scripts3.js')
  script(src='/js/search.js')
  script(type='module' src='/js/sidepanel.js')
  script(type='module' src='/js/functions.mjs')

body(class=mode)
include includes/header.pug
.container
  .skeleton-loader
    .tabsket
      button.tablink.skeleton
      button.tablink.skeleton
      button.tablink.skeleton
      button.tablink.skeleton
    .tabcontentsket
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
    .sidepanelsket
      .gridPanel
        div.header.skeleton
      .gridPanel
        .imgHolder.skeleton
      .gridPanel
        .linkInfosket.skeleton
        .linkInfosket.skeleton
        .linkInfosket.skeleton
        .linkInfosket.skeleton
      .gridPanel
        .textHolder.skeleton

  div(id=escritorio + 'Cols' class='cuerpoInt' data-id='columns')
    if columnas.length === 0
      .tab
      div(id='edit' + escritorio + 'default', class='tabcontent', orden='0')
        div(class='columna' id=escritorio + 'default', data-db='')
        include includes/sidepanel.pug
    else
      .tab
        - var contador = {}
        each val, index in columnas
          - var item = val.name
          if contador.hasOwnProperty(item)
            - var numero = contador[item] + 1
            - contador[item] = numero
            button.tablinks.envolt(id=escritorio + val.name + numero, class=index === 0 ? 'defaultOpen' : undefined, orden=`${val.order}`, data-db=`${val._id}`)= val.name
          else 
            - contador[item] = 1
            button.tablinks.envolt(id=escritorio + val.name, class=index === 0 ? 'defaultOpen' : undefined, orden=`${val.order}`, data-db=`${val._id}`)= val.name
      - var contadortb = {}
      each val in columnas
        - var item = val.name
        if contadortb.hasOwnProperty(item)
          - var numero = contadortb[item] + 1
          - contadortb[item] = numero
          div(id='edit' + escritorio + val.name + numero, class='tabcontent', orden=`${val.order}`)
            div(class='columna' id=escritorio + val.name + numero, data-db=`edit${val._id}`)
              each link in links
                if link.idpanel == val._id
                  .link(id=`${link._id}` orden= `${link.orden}`)
                    a(href= `${link.URL}` target='_blank' title= `${link.name}`)
                      img(src=`${link.imgURL}`)
                      | #{link.name}
                    .lcontrols
                      span.icofont-external
              if val.vacio == true
                .link(orden='0')
          //- include includes/sidepanel.pug
        else
          - contadortb[item] = 1
          div(id='edit' + escritorio + val.name, class='tabcontent', orden=`${val.order}`)
            div(class='columna' id=escritorio + val.name, data-db=`edit${val._id}`)
              each link in links
                if link.idpanel == val._id
                  .link(id=`${link._id}` orden= `${link.orden}`)
                    a(href= `${link.URL}` target='_blank' title= `${link.name}`)
                      img(src=`${link.imgURL}`)
                      | #{link.name}
                    .lcontrols
                      span.icofont-external
              if val.vacio == true
                .link(orden='0')
      include includes/sidepanel.pug
.container2
  p#moveError
  #addDeskForm.deskForm
    h2 A&ntilde;ade Escritorio
    input#deskName(type='text' name='deskName')
    button#deskSubmit(type='submit') Enviar
    p#deskError
  #editDeskForm.deskForm
    h2 Edita Escritorio
    input#editdeskName(type='text' name='deskName')
    button#editdeskSubmit(type='submit') Modificar
    p#editdeskError
  #addColForm.deskForm
    h2 A&ntilde;ade Columna
    input#colName(type='text' name='colName')
    button#colSubmit(type='submit') Enviar
    p#addColError
  #addLinkForm.deskForm
    h2 A&ntilde;ade Link
    p Nombre
    input#linkName(type='text' name='linkName')
    p URL
    input#linkURL(type='text' name='linkURL')
    button#linkSubmit(type='submit') Enviar
    p#linkError
  #editLinkForm.deskForm
    h2 Edita Link
    fieldset
      legend Nombre y URL
      label(for='editLinkName') Nombre
      input#editlinkName(type='text' name='editlinkName' placeholder='')
      label(for='editLinkURL') URL
      input#editlinkURL(type='text' name='editlinkURL' placeholder='')
      button#editlinkSubmit(type='submit') Modificar
      p#editLinkError
    fieldset
      legend Mover Link
      label(for='moveLink') Selecciona columna:
      select#moveLink(name='desktops')
        if columnas !== undefined
        each val in columnas
          option(value=`${val.name}`) #{val.name}
      p#moveLinkError Error de muestra
    fieldset
      legend Cambiar Imagen
      label(for='linkImg') Selecciona una imagen:
      input#linkImg(type='file' name='linkImg')
      p#editLinkImageError Error de muestra
  #deleteLinkForm.deskForm
    h2 Seguro que quieres borrar este Link?
    button#confDeletelinkSubmit(type='submit') Si
    button#noDeletelinkSubmit(type='submit') No
    p#deleteLinkError
  #deleteLinkImgForm.deskForm
    h2 Seguro que quieres borrar esta imagen?
    button#confDeleteImgSubmit(type='submit') Si
    button#noDeleteImgSubmit(type='submit') No
    p#deleteImgError
  #deleteColForm.deskForm
    h2 Seguro que quieres borrar esta columna?
    button#confDeletecolSubmit(type='submit') Si
    button#noDeletecolSubmit(type='submit') No
    p#deleteColError
  #deleteDeskForm.deskForm
    h2 Seguro que quieres borrar este escritorio?
    button#confDeletedeskSubmit(type='submit') Si
    button#noDeletedeskSubmit(type='submit') No
    p#deleteDeskError
  #menuColumn.menuColumn
    strong Opciones Columna
    p#elementoC informacion del elemento 
    p#infoC otra informacion
    span.menuItem.addlink Nuevo
    span.menuItem.paste-btn Pegar
    span.menuItem.editcol Editar
    span.menuItem.moveCol Mover a
      i.icofont-thin-right
      ul#destDesk
        if escritorios !== undefined
        each val in escritorios
          li(id=`${val.name}`)= val.name
    span.menuItem.borracol Borrar 
  #menuLink.menuLink
    strong Opciones Enlace
    p#elementoL informacion del elemento 
    p#infoL otra informacion
    span.menuItem.editalink Editar
    span.menuItem.moveLink Mover a
      i.icofont-thin-right
      ul#destCol
        strong#otherDesk Mover a otro escritorio
        if columnas !== undefined
        each val in columnas
          li(id=`${val.name}`)= val.name
    span.menuItem.borralink Borrar
  #menuMoveTo(draggable='true')
    ul#destDeskMoveTo
      if escritorios !== undefined
        each val in escritorios
          li.accordion(id=`${val.name}`)
            i.icofont-folder &nbsp;
            | #{val.name}
            ul
              each columnasVal in columnasAll
                - if (columnasVal.escritorio === val.name)
                    li(id=`${columnasVal.name}`)= columnasVal.name
    #moveToControls
      button#acceptMove Aceptar 
      button#cancelMove Cancelar
  #alertCard
script(src='/js/Sortable-master/Sortable.min.js')